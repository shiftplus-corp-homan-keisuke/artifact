# オンデマンドビルドサービス 進捗状況

## 実装済み機能

### サーバーサイド

- Express.js ベースの RESTful API
- ソースコードを受け取り、ビルドを実行するエンドポイント
- モックビルド機能（実際の Vite ビルドの代わり）
- 実際の Vite ビルドプロセスの統合
- Docker コンテナによる安全な実行環境の実装
- エラーハンドリングとロギング
- TypeScript による型安全な実装

### クライアントサイド

- ソースコード入力フォーム
- ビルド実行ボタン
- ビルド結果表示用の iframe ローダー
- postMessage API による親ウィンドウと iframe 間の通信

  - ビルド成果物の iframe 内でのレンダリング

### ドキュメント

- デモサイトの動作シーケンス図を作成 (シーケンス図.md)

### 修正した問題点

- TypeScript のビルドエラーを修正（buildRouter の型定義問題）
- iframe の sandbox 属性に`allow-same-origin`を追加
- モックビルド成果物のレンダリング処理を改善
- iframe とメインページ間の通信を強化
- デバッグログを追加
- Docker ビルドログの表示を改善

  - Vite ビルド成果物に含まれる `process` 参照エラーの修正
  - iframe 内での React マウントターゲット (`#root`) が見つからない問題の修正
  - React 18 の `createRoot` API への移行 (Warning 対応)

## 動作確認済み機能

- サーバーの起動
- ビルドリクエストの送信と処理
- ビルド結果の iframe への表示
- エラーハンドリング

## 今後の課題

- キャッシング機能の追加
- テストカバレッジの向上
- CI/CD パイプラインの構築
- セキュリティ強化
- パフォーマンス最適化
